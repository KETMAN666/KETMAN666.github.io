function popup_age_confirm() {	$.cookie('age_confirmed', 1, { expires: 300, path: '/' });	$('.modal-dialog_popupage').closest('#modal').modal('hide');	popup_age();}function popup_age(){	if (!$.cookie('age_confirmed') && !location.pathname.match(/^\/agedenied\//)) {		$('#modal').empty().append($('#dialog_warning').html()).modal('show').on('hidden.bs.modal', function (e) {			popup_age();		});	}	if ($.cookie('age_confirmed') && location.pathname.match(/^\/agedenied\//)) {		location.href = '/';	}}$(document).ready(function(){	// if ($(window).width() >= 768) {	// 	$('[data-sticky_column]').stick_in_parent({	// 		parent: '[data-sticky_parent]'	// 	});	// }	//popup_age();	$('#el1-anc').click(function(event) {		var identifier = $(this).attr('href');		event.preventDefault();		$('#bot-tabs a[href="#catalog_specs"]').tab('show');		function second_passed() {		  $('html, body').animate({			scrollTop: $(identifier).offset().top - 112 		}, 500);				}		setTimeout(second_passed, 300)		});	$('#sidebarCollapse').on('click', function () {		$('#sidebar').addClass('active');		$('.collapse.in').toggleClass('in');		$('a[aria-expanded=true]').attr('aria-expanded', 'false');		$('body').addClass('modal-open');		$('body').append($('<div>').addClass('modal-backdrop show'));		hideScroll();		$('#sidebar_dismiss, .modal-backdrop').on('click', function () {			$('#sidebar').removeClass('active');			$('body').removeClass('modal-open');			$('body .modal-backdrop.show').remove();			showScroll();			$('#sidebar_dismiss, .modal-backdrop').off('click');		});	});			$('#email_subscribe_form, #email_subscribe_form2').on('submit', function() {		var self = this;		$.ajax({			url: '/?comp=mindbox&action=xhr_subscribe',			type: 'post',			data: {				email: $(self).find('input[name="email"]').val()			},			dataType: 'json',			success: function(response) {				if (response.success) {					$(self).find('input[name="email"]').val('');					alert('Вы успешно подписались на нашу рассылку', 'Подписка оформлена');				} else {					$(self).find('input[name="email"]').val('');					alert('Укажите валидный email для оформления подписки', 'Ошибка');				}			}		});		return false;	});	$('.autohide-html').each(function(){        var target,            show = $(this).data('show') || 'p:lt(1)',            unshow = $(this).find(':not('+show+')'),            html = $.merge($(this).find('h2:lt(1)').clone(),$(this).find('p:lt(1)').clone());        if($(unshow).length) {            $(this).addClass('d-none');                        $(this).after(                $('<a>', {href: '#', text: 'Читать все'}).click(function(){                    $(this).prev().remove();                    $(this).prev().removeClass('d-none');                    $(this).remove();                    return false;                }).addClass('button-7 button color-style4 title-style6  ml-auto')            );                        $(this).after(                $('<div>', {html: html})            );        }    });		//клики по удалению в заказе - корзина	$('.remove').click(function(){		var el = $(this);		el.parent().parent().addClass('removed');		window.setTimeout(function() {			el.parent().parent().slideUp('fast', function() {				el.parent().parent().remove();			});		}, 200);	});	function changeVal() {	}		//клики по +- в заказе - корзина	$('.qt-plus').click(function(){		$(this).parent().parent().parent().parent('.tovar-cart-ord').addClass('animated shake');		var el1 = $(this);		window.setTimeout(function(){el1.parent().parent().parent().parent('.tovar-cart-ord').removeClass('animated shake'); changeVal(el1);}, 150);	});	//клики по +- в заказе - корзина	$('.qt-minus').click(function(){		$(this).parent().parent().parent().parent('.tovar-cart-ord').addClass('animated shake');		var el2 = $(this);		window.setTimeout(function(){el2.parent().parent().parent().parent('.tovar-cart-ord').removeClass('animated shake'); changeVal(el2);}, 150);	});		//Login в модалке	$('body').on('click', 'a[data-modal-login]', function(obj) {		$('.md-modal').addClass('md-show');		$('#modal_alex').load('/resources/templates/components/catcontent/includes/loginform.html');	});	$('body').on('click', 'a[data-modal-reg]', function(obj) {		$('.md-modal').addClass('md-show');		$('#modal_alex').load('/?comp=reg');	});	$('body').on('click', 'a[data-modal-remind]', function(obj) {		$('.md-modal').addClass('md-show');		$('#modal_alex').load('/?comp=reg&action=remind_password');	});		$('.catalog-obj-list a').click(function(event) {		var identifier = $(this).attr('href');		$('html, body').animate({			scrollTop: $(identifier).offset().top - 120		}, 500);		event.preventDefault();	});	$('body').scrollspy({ target: '.catalog-obj-list', offset: 120 });		//Инициализация функции ховер для сабменю  для тач устройств - переход по ссылке после ховера	if($(document).width()>=768 && $(document).width()<=1024){		touchHover(); 	}		if($(document).width()>=300 && $(document).width()<=767){		touchHover(); 	}		//скроллим в топ по нажатию на кнопку 'вверх'	$('body').on('click', '#btn-up', function(obj) {		$('html, body').animate({			scrollTop: $('html, body').offset().top		}, 500);	});		//модалка	$('body').on('click', 'a[data-modal-form]', function(obj) {		var form_name = $(this).data('modal-form');		var data = { comp: 'cform', form_name: form_name };		var ext_data = {};		$(this.attributes).each(function() {			if (this.name.match(/^data-ext-/))				ext_data[this.name.replace(/^data-ext-/,'')] = this.value;		});		if (ext_data) data.ext_data = ext_data;		$('#modal').load('/', data, function() {			$('#modal').modal('show');		});	});	$('input[data-mask]').each(function() {		$(this).mask($(this).data('mask'));	});	var window_with = $(window).width();	$(window).on('resize', function() {		if (window_with != $(window).width()) {			sidebarScrollbarInit();		}		window_with = $(window).width();	});	sidebarScrollbarInit();});function cityForm() {	$('#modal').empty().append($('#dialog_icity').html()).on('shown.bs.modal', function() {		citiesAC('input.icity_val', function(event, ui) {			changeCity(ui.item.city_name, ui.item.state_name, ui.item.country_name, ui.item.region_id);		});	}).modal('show');}function changeCity(city_name, state_name, country_name, region_id) {	if (city_name && state_name && country_name) {		$.cookie('icity', city_name, { expires: 300, path: '/' });		$.cookie('istate', state_name, { expires: 300, path: '/' });		$.cookie('icountry', country_name, { expires: 300, path: '/' });		$.cookie('iregion', (region_id || 0), { expires: 300, path: '/' });		$('.icity').text(city_name);		location.reload();	}		$('#modal').modal('hide');}if (!$.cookie('icity')){	if (typeof ymaps != 'undefined') {		ymaps.ready().then(function() {			return ymaps.geolocation.get({				provider: 'yandex',				autoReverseGeocode: true			});		}).then(function (result) {			var city_name = result.geoObjects.get(0).getLocalities()[0],				state_name = result.geoObjects.get(0).getAdministrativeAreas()[0],				country_name = result.geoObjects.get(0).getCountry();			if (!city_name || !state_name || !country_name) {				state_name = city_name = 'Санкт-Петербург';				country_name = 'Россия';			}			changeCity(city_name, state_name, country_name);		});	} else {		changeCity('Санкт-Петербург', 'Санкт-Петербург', 'Россия', 398);	}}//-----------------------------------------------------------------------------//функцииfunction sidebarScrollbarInit() {	if ($(window).width() < 768) {		$('#sidebar').mCustomScrollbar('destroy');		$('#sidebar').mCustomScrollbar({			theme: 'minimal'		});	} else {		$('#sidebar').mCustomScrollbar('destroy');	}}function carouselAutoHeight(event) {	$('.owl-carousel .item').height(Math.max.apply(this, $('.owl-carousel .item').map(function() {		return $(this).css('height','auto').height();	}).get()));}//Функция ховер для сабменю  для тач устройств - переход по ссылке после ховераfunction touchHover() {    $('[data-hover]').click(function(e){        e.preventDefault();        var $this = $(this);        var onHover = $this.attr('data-hover');        var linkHref = $this.attr('href');        if (linkHref && $this.hasClass(onHover)) {            location.href = linkHref;            return false;        }         $this.toggleClass(onHover);    });};
